// num/masked1.cpp
#include <iostream>
#include <valarray>
using namespace std;

// Построчный вывод массива значений
template<class T>
void printValarray (const valarray<T>& va, int num)
{
    for (int i=0; i<va.size()/num; ++i) {
        for (int j=0; j<num; ++j) {
            cout << va[i*num+j] << ' ';
        }
        cout << endl;
    }
    cout << endl;
}

int main()
{
    /* Массив значений с 12 элементами
     * - четыре строки
     * - три столбца
     */
    valarray<double> va(12);

    // Заполнение массива значений
    for (int i=0; i<12; i++) {
        va[i] = i;
    }
    printValarray (va, 3);

    // Присваивание 77 всем элементам, меньшим 5
    va[va<5.0] = 77.0;

    // Присваивание 100 всем значениям, большим 5, но меньшим 9
    va[va>5.0 && va<9.0]
        = valarray<double>(va[va>5.0 && va<9.0]) + 100.0;

    printValarray (va, 3);
}


